<!DOCTYPE html>
<html>
<head>
    <title>WhatsApp Connect</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 15px; font-size: 16px; margin: 10px; }
        #qr { margin: 20px; }
    </style>
</head>
<body>
    <h1>Connect WhatsApp</h1>
    <button onclick="getQR()">Get QR Code</button>
    <div id="qr"></div>
    <div id="status"></div>

    <script>
        async function getQR() {
            document.getElementById('status').textContent = 'Loading...';
            
            try {
                const response = await fetch('https://sword-bot-backend.onrender.com/api/start', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const data = await response.json();
                
                if (data.qr) {
                    document.getElementById('qr').innerHTML = '';
                    QRCode.toCanvas(document.getElementById('qr'), data.qr, {
                        width: 250,
                        margin: 2
                    });
                    document.getElementById('status').textContent = '‚úÖ QR Ready! Scan with WhatsApp';
                } else {
                    document.getElementById('status').textContent = '‚ùå No QR received: ' + JSON.stringify(data);
                }
            } catch (error) {
                document.getElementById('status').textContent = '‚ùå Error: ' + error.message;
            }
        }
        <button onclick="testBackend()">üß™ Test Backend</button>

        async function testBackend() {
    setStatus('üß™ Testing backend...', 'loading');
    
    try {
        const response = await fetch(BACKEND_URL + '/api/test', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        });
        
        const data = await response.json();
        
        if (data.qr) {
            document.getElementById('qrContainer').style.display = 'block';
            const qrElement = document.getElementById('qr');
            qrElement.innerHTML = '';
            
            QRCode.toCanvas(qrElement, data.qr, {
                width: 250,
                margin: 2,
                color: { dark: '#000000', light: '#FFFFFF' }
            });
            
            setStatus('‚úÖ Backend works! But this is a test QR', 'success');
        } else {
            setStatus('‚ùå Test failed: ' + (data.error || 'Unknown'), 'error');
        }
        
    } catch (error) {
        setStatus('‚ùå Test failed: ' + error.message, 'error');
    }
}
    </script>
</body>
</html>
